<!DOCTYPE html>

<!-- Start of HTML Document -->
<html>
    <head>
        <!-- Load Style -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/css?family=Open Sans" rel="stylesheet">
        <link rel="stylesheet" href="css/main.css">

        <!-- Load Jatos -->
        <script src="js/main.js"></script>
        <script src="jatos.js"></script>
    </head>

    <!-- Start of Page Content (Visible on Screen) -->
    <body>

        <div id="message" class="full_screen_message" style="text-align: center;">
        </div>

        <script>
            loadComponent(function() {

                let componentData = {
                    'participant_ID':participantID, 
                    'running_ID':runningID,
                    'back_code': backCode,
                    'variation':variationID, 
                    'component':componentFlow[componentIndex]
                };

                let paragraphIndex = 0;

                const message = document.getElementById("message");
                message.innerHTML = paragraphs[paragraphIndex];
                
                document.onkeydown = function(event) { // navigation through intro
                    if (event.key == Keyboard.LeftArrow) {
                        paragraphIndex = Math.max(0, paragraphIndex - 1);
                        message.innerHTML = paragraphs[paragraphIndex];
                    }
                    else if (event.key == Keyboard.RightArrow) {
                        paragraphIndex += 1;

                        if (paragraphIndex < paragraphs.length) {    
                            message.innerHTML = paragraphs[paragraphIndex];
                        }
                        else { // once we reach last paragraph, right arrow leads to start of first condition
                            disableInput(); // disable any further input
                            fadeOut(message, function() {
                                showNextComponent(componentData);
                            });
                        }
                    }
                };
            });

            const paragraphs = [
                `Super! In dieser Übung haben Sie zwei Samstage erlebt. Am ersten Samstag haben wir Ihnen vorgegeben, welche Option Sie wählen müssen. Am zweiten Samstag konnten Sie frei entscheiden.`,

                `Im richtigen Spiel werden Sie an manchen Samstagen auch in anderen Räumen als dem Eingangsbereich starten.
                <br>
                <br>
                Außerdem verändert sich manchmal etwas in Ihrem Lieblings-Bar-Lokal. Um so viele Gläser Alkohol wie möglich zu erhalten, müssen Sie diese VERÄNDERUNGEN BEMERKEN und sich ENTSPRECHEND VERHALTEN.`,


                `Sie werden nacheinander 5 verschiedene Bar-Lokale besuchen, da Sie regelmäßig neue Lokale ausprobieren und diese dann eine Zeit Lang zu Ihrem Lieblings-Bar-Lokal erklären.
                <br>
                <br>
                Jedes Bar-Lokal hat 10 Räume und den Grundriss, den wir Ihnen gezeigt haben. Welche Bar-Tresen sich in welchem Raum befinden und wie viele Gläser Alkohol Sie wo erhalten, ist aber zwischen allen Lokalen verschieden. Sobald Sie in einem neuen Bar-Lokal sind, müssen Sie also auf's Neue herausfinden, wo Sie am meisten Gläser Alkohol erhalten.`,

                `Bevor Sie in Ihrem jeweils neuen Lieblings-Bar-Lokal versuchen, möglichst viel Alkohol zu erhalten, können Sie sich eine kleine Pause gönnen. Sobald Sie bereit sind, weiterzumachen, drücken Sie die rechte Pfeiltaste.`,


                `Hier noch einmal die Zusammenfassung:
                <br>
                <br>
                Erhalten Sie so viele Gläser Alkohol wie möglich. Prägen Sie sich dazu ein, wo Sie aktuell am meisten Alkohol erhalten. Bemerken Sie eventuelle Veränderungen und verhalten Sie sich entsprechend.
                <br>
                <br>
                Entscheiden Sie sich in jedem Raum so schnell wie möglich für eine Handlung:
                <br>
                - 'F' = linke Handlung
                <br>
                - 'J' = rechte Handlung
                <br>
                - 'Leertaste' wenn nur eine Handlung möglich`,
                
                `Bitte markieren Sie die Aussagen auf den folgenden Seiten als richtig oder falsch, um sicherzugehen, dass Sie die Spielanleitung verstanden haben. 
                <br>
                <br>
                linke Pfeiltaste = richtig
                <br>
                rechte Pfeiltaste = falsch
                <br>
                'Enter' = Bestätigung
                <br>
                <br>
                Sollten Sie eine oder mehr Fragen falsch beantworten, werden Sie zurück zum Beginn der Spielregeln geleitet und werden das Quiz noch einmal ausfüllen.
                `
            ];
        </script>

    </body>
</html>
