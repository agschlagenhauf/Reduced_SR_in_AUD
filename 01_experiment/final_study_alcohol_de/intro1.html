<!DOCTYPE html>

<!-- Start of HTML Document -->
<html>
    <head>
        <!-- Load Style -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://fonts.googleapis.com/css?family=Open Sans" rel="stylesheet">
        <link rel="stylesheet" href="css/main.css">

        <!-- Load Jatos -->
        <script src="js/main.js"></script>
        <script src="jatos.js"></script>
    </head>

    <!-- Start of Page Content (Visible on Screen) -->
    <body>

        <div id="message" class="full_screen_message" style="text-align: center;">
        </div>

        <script>
            jatos.onLoad(function() { // load JATOS for the very first time

                prepareComponentFlow();
                
                let componentData = {
                    'participant_ID':participantID, 
                    'running_ID':runningID,
                    'back_code': backCode,
                    'variation':variationID, 
                    'component':componentFlow[componentIndex]
                };

                let paragraphIndex = 0;

                const message = document.getElementById("message");
                message.innerHTML = paragraphs[paragraphIndex];
                
                document.onkeydown = function(event) { // navigation through intro
                    if (event.key == Keyboard.LeftArrow) {
                        paragraphIndex = Math.max(0, paragraphIndex - 1);
                        message.innerHTML = paragraphs[paragraphIndex];
                    }
                    else if (event.key == Keyboard.RightArrow) {
                        paragraphIndex += 1;

                        if (paragraphIndex < paragraphs.length) {    
                            message.innerHTML = paragraphs[paragraphIndex];
                        }
                        else { // once we reach last paragraph, right arrow leads to start of first condition
                            disableInput(); // disable any further input
                            fadeOut(message, function() {
                                showNextComponent(componentData);
                            });
                        }
                    }
                };
            });

            const paragraphs = [
                `Herzlich willkommen zum Computerspiel! 
                <br>
                <br>
                Das Spiel wird ungefähr 1 Stunde dauern. Machen Sie es sich bequem und lesen Sie sich die Spielregeln auf den nächsten Seiten bitte aufmerksam durch.
                <br>
                <br>
                rechte Pfeiltaste = weiter
                <br>
                linke Pfeiltaste = zurück`,


                `Stellen Sie sich vor: Regelmäßig Samstags gehen Sie nach einer stressigen Arbeitswoche in Ihr Lieblings-Bar-Lokal.
                <br>
                <br>
                Das Lokal besteht aus verschiedenen Räumen und hat für jeden Geschmack etwas zu bieten.`,


                `Das Bar-Lokal ist jedoch nicht nur bei Ihnen beliebt. Manche Räume werden regelmäßig für geschlossene Gesellschaften reserviert, sodass Sie dort keine Getränke erhalten können. Außerdem ist das Getränk, das Sie bestellen, in manchen Räumen regelmäßig nur in kleineren Mengen verfügbar oder schon ausverkauft.
                <br>
                <br>
                In welchen Räumen Sie wie viele Gläser Ihres alkoholischen Getränks erhalten, wenn Sie am Tresen bestellen, wissen Sie daher nicht.`,

                
                `Ihr Ziel ist es jeden Samstag, so viele Gläser Alkohol wie möglich zu erhalten. 
                <br>
                <br>
                Sammeln Sie am meisten Gläser unter den Teilnehmenden ein, schenken wir Ihnen zusätzlich einen Getränkemarkt-Gutschein im Wert von 50€. Sind Sie auf Platz 2 bis 4, schenken wir Ihnen einen Getränkemarkt-Gutschein im Wert von je 15€. Je mehr Gläser Sie im gesamten Spiel erhalten, desto höher also die Wahrscheinlichkeit, dass Sie zu den glücklichen Gewinnenden zählen!`,

                `Ihr Lieblings-Bar-Lokal hat insgesamt 10 Räume. Sobald Sie einen Raum betreten, leuchten Ihre Handlungsoptionen nach kurzer Zeit GELB auf.
                <br>
                <br>
                In manchen Räumen können Sie zwischen ZWEI Handlungsoptionen wählen: Zwei Türen, die zu verschiedenen nächsten Räumen führen.
                <br>
                <br>
                In anderen Räumen können Sie nur EINE Handlungsoption wählen: Einen Bar-Tresen, an dem Sie versuchen, mehrere Gläser Alkohol zu bestellen. Anschließend sehen Sie, ob und wie viele Gläser Sie erhalten. Dann gehen Sie automatisch zum nächsten Raum weiter.`,


                `An den ersten Samstagen geben wir Ihnen in allen Räumen vor, welche Option Sie wählen sollen. In Räumen, die eigentlich zwei Optionen enthalten, beudetet das: Eine der Optionen ist ausgegraut und kann nicht gewählt werden. Die Option, die Sie wählen können, leuchtet GELB auf. 
                <br>
                <br>
                Prägen Sie sich an diesen ersten Samstagen gut ein, wo Sie die meisten Gläser Alkohol erhalten. Wie viele Gläser Sie in einem Raum erhalten, hängt nicht davon ab, auf welchem Weg Sie in den Raum gelangt sind.`,

                `An den darauffolgenden Samstagen lassen wir Ihnen dann die freie Wahl: In Räumen mit zwei Handlungsoptionen sind beide Optionen verfügbar und GELB markiert.
                <br>
                <br>
                An diesen Samstagen haben Sie die Möglichkeit, so viele Gläser Alkohol wie möglich zu erhalten. Wählen Sie die Optionen, die Sie zur größten Menge an Alkohol führen. 
                `,

                `Den Grundriss Ihrer Lieblingsbar mit 10 Zimmern sehen Sie auf der nächsten Seite. Sie starten unten und gehen dann einen Weg, der Sie bis zu Raum 10 (oben) führt.`
            ];
        </script>

    </body>
</html>

